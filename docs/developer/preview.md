# File Preview

Preview generation is performed by the `PreviewService`.

For easier access the service is also available via the `KBox\Documents\Facades\Previews` facade.

The previews are generated by Preview drivers. Each driver defines the supported mime types.

### Write a Preview driver

A preview driver can be created by implementing the `KBox\Documents\Contracts\PreviewDriver` interface.

The interface defines three methods:

- `preview` generate a renderable representation of a file
- `isSupported` verify if a given file is supported by the driver
- `supportedMimeTypes` return the supported mime types

```php
use KBox\File;
use KBox\Documents\DocumentType;
use KBox\Documents\Contracts\PreviewDriver;
use Illuminate\Contracts\Support\Renderable;

class PngPreviewDriver implements PreviewDriver, Renderable
{
    private $url = null;

    public function preview(File $file) : Renderable;
    {
        // ... generate the preview
    }

    public function isSupported(File $file)
    {
        return in_array($file->mime_type, $this->supportedMimeTypes()) && $file->document_type === DocumentType::IMAGE;
    }

    public function supportedMimeTypes()
    {
        return [
            'image/png',
        ];
    }
}
```

The custom driver can be registered using the facade

```php
use KBox\Documents\Facades\Previews;

Previews::register(PngPreviewDriver::class);
```
